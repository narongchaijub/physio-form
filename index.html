<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ü‡∏≠‡∏£‡πå‡∏° PhysioHOMAR</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #a8e6cf 0%, #ffd3b6 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 500px;
      width: 100%;
      padding: 40px 30px;
      animation: slideUp 0.5s ease;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    h2 {
      color: #5cb85c;
      text-align: center;
      margin-bottom: 30px;
      font-size: 24px;
    }
    
    .form-group {
      margin-bottom: 25px;
    }
    
    label {
      display: block;
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 15px;
    }
    
    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s ease;
      background: #f8f9fa;
    }
    
    input[type="text"]:focus,
    input[type="date"]:focus,
    select:focus {
      outline: none;
      border-color: #5cb85c;
      background: white;
      box-shadow: 0 0 0 3px rgba(92, 184, 92, 0.1);
    }
    
    select {
      cursor: pointer;
    }
    
    button[type="submit"] {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #a8e6cf 0%, #ffd3b6 100%);
      color: #333;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }
    
    button[type="submit"]:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(168, 230, 207, 0.3);
    }
    
    button[type="submit"]:active {
      transform: translateY(0);
    }
    
    .icon {
      margin-right: 5px;
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 30px 20px;
      }
      
      h2 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üìã ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ PhysioHOMAR</h2>
    <form id="physioForm">
      <div class="form-group">
        <label for="fullName"><span class="icon">üë§</span>‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
        <input type="text" id="fullName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>
      </div>
      
      <div class="form-group">
        <label for="nickname"><span class="icon">üòä</span>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô:</label>
        <input type="text" id="nickname" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>
      </div>
      
      <div class="form-group">
        <label for="symptom"><span class="icon">ü©∫</span>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô:</label>
        <input type="text" id="symptom" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô" required>
      </div>
      
      <div class="form-group">
        <label for="disease"><span class="icon">üíä</span>‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß:</label>
        <input type="text" id="disease" placeholder="‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏™‡πà '‡πÑ‡∏°‡πà‡∏°‡∏µ')" required>
      </div>
      
      <div class="form-group">
        <label for="dateTime"><span class="icon">üìÖ</span>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
        <input type="date" id="dateTime" required>
      </div>
      
      <div class="form-group">
        <label for="timeSlot"><span class="icon">‚è∞</span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤:</label>
        <select id="timeSlot" required>
          <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ --</option>
          <option value="09:00-11:00">09:00 - 11:00 ‡∏ô.</option>
          <option value="12:00-14:00">12:00 - 14:00 ‡∏ô.</option>
          <option value="15:00-17:00">15:00 - 17:00 ‡∏ô.</option>
          <option value="18:00-20:00">18:00 - 20:00 ‡∏ô.</option>
          <option value="21:00-22:00">21:00 - 22:00 ‡∏ô.</option>
        </select>
      </div>
      
      <button type="submit">‚ú® ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </form>
  </div>
  
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    const liffId = "2008220810-d7jvb936";

    async function main() {
      try {
        await liff.init({ liffId });
        
        if (!liff.isLoggedIn()) {
          liff.login();
          return;
        }
        
        const profile = await liff.getProfile();
        const form = document.getElementById("physioForm");
        
        const today = new Date().toISOString().split('T')[0];
        document.getElementById("dateTime").value = today;
        
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          
          const submitBtn = e.target.querySelector('button[type="submit"]');
          submitBtn.textContent = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...";
          submitBtn.disabled = true;
          
          const appointmentData = {
            userId: profile.userId,
            displayName: profile.displayName,
            pictureUrl: profile.pictureUrl || '',
            name: document.getElementById("fullName").value,
            symptoms: document.getElementById("symptom").value,
            medication: document.getElementById("disease").value,
            appointmentDate: document.getElementById("dateTime").value,
            appointmentTime: document.getElementById("timeSlot").value
          };
          
          console.log('Sending data:', appointmentData);
          
          try {
            const response = await fetch("https://script.google.com/macros/s/AKfycbxs1okzG1j04plC5Zw9z1UeBITbVkpFZx__rnOvZaaSUL0jMENZV3qqggTkmFcxmWb1mg/exec", {
              method: "POST",
              mode: "no-cors",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify(appointmentData)
            });
            
            console.log('Data sent successfully');
            alert("‚úÖ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏≤‡∏á LINE");
            
            setTimeout(() => {
              liff.closeWindow();
            }, 2000);
            
          } catch (error) {
            console.error('Error:', error);
            alert("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
            submitBtn.textContent = "‚ú® ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
            submitBtn.disabled = false;
          }
        });
        
      } catch (error) {
        console.error('LIFF Error:', error);
        alert("‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: " + error.message);
      }
    }

    main();
  </script>
</body>
</html>
